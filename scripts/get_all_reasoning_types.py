import json

data_inst, intersection, comparison = [], {}, {}
def load_data():
    global data_inst, intersection, comparison
    print("Loading original data")
    data_inst += json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/hotpot_dev_distractor_v1.json"))
    data_inst += json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/hotpot_train_v1.1.json"))
    print("Loading intersection data")
    for inst in json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/noisy/train_intersection.json")) + \
                json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/noisy/dev_intersection.json")):
        intersection[inst["_id"]] = inst
    print("Loading comparsion data")
    for inst in json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/noisy/train_comparatives.json")) + \
                json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/noisy/dev_comparatives.json")):
        comparison[inst["_id"]] = inst

def revisit_comparison_types():
    cnt = 0
    # for inst_id, inst in comparison.items():
    #     if inst["answer"].lower() not in inst["question"].lower() and "or" not in inst["question"].lower() \
    #             and "between" not in inst["question"].lower():
    #         print(inst["_id"], "\t", inst["question"])
    #         cnt += 1
    to_move = ['5a8f6bfe55429918e830d21c', '5ae104a955429920d5234280', '5a761e365542994ccc9186df', '5a89c2d055429946c8d6e9b9', '5a7e20f25542997cc2c47526', '5abd10ee55429933744ab6f1', '5a8a310f5542996c9b8d5e3c', '5a7fc8f555429969796c1b63', '5a8f0bb75542995b44241f38', '5ae13a3c5542990adbacf72f', '5a76b6bc5542993735360181', '5a7119655542994082a3e58b', '5a8cac56554299585d9e3715', '5a7332215542994cef4bc4a9', '5a8248d8554299676cceb249', '5a710e925542994082a3e536', '5a74fc695542996c70cfae66', '5abc0b155542996583600405', '5ab4865b5542991779162cbf', '5ab8b25055429919ba4e235c', '5a7145b35542994082a3e73a', '5ac2e4d2554299218029db90', '5a8acc4755429950cd6afb97', '5ae527115542990ba0bbb1d5', '5ae0cd8855429945ae959458', '5ade186555429939a52fe812', '5a72a44e5542994cef4bc3ae', '5abba975554299642a094b12', '5a7ca3205542990527d554ed', '5ab68f70554299710c8d1ecb', '5ab731cf5542993667793f7f', '5a724b945542990c210a40c5', '5ab5061b5542996a3a969ffd', '5a732ff25542992359bc3272', '5a735bc655429901807daff1', '5a907e245542995651fb516d', '5ac0185e5542992a796dec83', '5a8bb1975542997f31a41da3', '5ac079bf5542996f0d89cbee', '5ae3302f55429928c423965e', '5aba8c9455429901930fa82a', '5ae33b875542992e3233c328', '5a8d087c554299585d9e379d', '5ab9985a554299131ca4238d', '5a7a3e665542994f819ef18b', '5a7277a45542994cef4bc2b7', '5a7cae0c554299683c1c6333', '5ac4fea755429924173fb543', '5ab2f0be554299545a2cfadd', '5ab446225542991779162c52', '5a7a1db45542990198eaf08e', '5a81a7ca5542990a1d231e4c', '5a8d0cf955429941ae14df78', '5a89cb985542993b751ca997', '5ade50e6554299728e26c6c3', '5a761fad5542994ccc9186e6', '5a8319c855429966c78a6b39', '5a7fce225542995d8a8ddf28', '5ac06d475542996f0d89cbc6', '5a7252825542990c210a4102', '5adf57075542992d7e9f931f', '5ade4e37554299728e26c6ba', '5ae2b9c85542992decbdcd84', '5a7171c25542994082a3e835', '5abd2f3555429933744ab752', '5ab7e72e5542993667794040', '5abb0e6b5542992ccd8e7ee6', '5a88eeb655429938390d3ff9', '5abc382055429959677d6a54', '5abdc74655429965af743e35', '5add11045542994ed6169c5b', '5a888480554299206df2b2d7', '5abba08e554299642a094ad5', '5ab91ff0554299753720f710', '5ae0d3ea55429945ae959476', '5a7d4d115542991319bc9398', '5abd81e15542993062266cb2', '5a80968b5542992097ad2ffe', '5ab7043e5542991d32223752', '5a88eafb55429938390d3ff5', '5ab9246255429919ba4e23d3', '5ae234845542992decbdcc5b', '5adcb722554299473435377b', '5aba3bbd554299232ef4a28d', '5a77ec585542992a6e59dff9', '5a76d78a55429972597f13e0', '5ab74a785542993667793fb2', '5adff7bb55429925eb1afbad', '5ac31b9e554299741d48a1f8', '5a8f850f55429918e830d24c', '5abd36aa5542993062266c07', '5a7c8ea955429935c91b521c', '5adc176855429944faac2416', '5a728a725542992359bc30dd', '5ab29b50554299449642c92e', '5a7fd7405542995d8a8ddf32', '5ab83e2d55429934fafe6d31', '5abc2f7e554299114383a0fa', '5abed1f45542997ec76fd375', '5ab5d6f0554299494045f07a', '5ab60e06554299110f2199d0', '5a7cdb3c554299683c1c63a1', '5abc30df554299114383a0fe', '5adc963f5542994ed6169ba1', '5a8e1d2355429917b4a5bd24', '5a735a4755429901807dafe0', '5ab27ed95542993be8fa992b', '5ae2d0a75542991a06ce98dd', '5a73bfa855429905862fe0b0', '5a74d9605542996c70cfae11', '5ae1290b5542997b2ef7d111', '5a77143555429937353601c7', '5a7cdd1455429909bec76856', '5a8ae66f55429970aeb70327', '5a7e6a235542997cc2c4753f', '5ae2084a5542997283cd233b', '5a8bb1ce5542997f31a41da5', '5ade469c5542992fa25da722', '5a7a249c5542996a35c170fb', '5ab7e5e9554299366779403c', '5ab2e92c55429929539468ab', '5a83c7aa554299123d8c21b5', '5a7e936c5542993067513585', '5adbe3b25542994650320c0d', '5ac0ffec5542996f0d89cc50', '5ab801ce5542990e739ec7c8', '5abad3ff55429939ce03dd56', '5ab4ac2555429942dd415f7d', '5ae28fcb554299495565dac0', '5a896de855429946c8d6e91c', '5a81ce1d55429926c1cdad82', '5abb1e1b5542992ccd8e7f19', '5a83041355429966c78a6ae8', '5a8b7e9c5542995d1e6f13c1', '5a7fa08d55429969796c1af7', '5a88c92d5542993b751ca84e', '5adc7dbf5542994d58a2f618', '5a81f10055429903bc27ba06', '5ab6dbc15542995eadef00cd', '5adcd9fe5542990d50227d46', '5abd81ff5542993062266cb3', '5a8d08ee55429941ae14df70', '5ae1e11c554299234fd04335', '5a7100435542994082a3e4a3', '5a734ca85542994cef4bc51b', '5ac5632e5542993e66e823d9', '5a79fc8b5542994f819ef114', '5ab6d04c554299710c8d1f70', '5ab6654455429954757d3281', '5a7fd7a25542992e7d278dc3']
    for qid in to_move:
        intersection[qid] = comparison[qid]
        del comparison[qid]

    json.dump(intersection,
              open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/all_intersection_temp.json", 'w'),
              indent=2)
    json.dump(comparison,
              open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/all_comparison_temp.json",
                   'w'),
              indent=2)

def revisit_intersection_types():
    cnt = 0
    int_data = json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/all_intersection_temp.json"))
    comp_data = json.load(open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/all_comparison_temp.json"))
    # for inst in int_data:
    #     if inst["answer"]!="yes" and inst["answer"]!="no" and inst["answer"].lower() in inst["question"].lower() and \
    #         " or " in inst["question"] or "between" in inst["question"].lower() or "out of" in inst["question"].lower():
    #         print(inst["_id"], "\t", inst["question"])
    #         cnt += 1
    to_move = ['5a71458e5542994082a3e738', '5a8220805542995ce29dccbe', '5a8bcf985542997f31a41dcb', '5adde6805542997dc7907099', '5ab55f9d554299488d4d996c', '5a74500455429974ef308bd2', '5a77f5fa55429949eeb29fc4', '5a7b2541554299042af8f70b', '5a888dd15542997e5c09a61a', '5a7c536355429935c91b515b', '5a73d39a5542992d56e7e3ad', '5a77e83055429949eeb29f9b', '5abffe695542997d6429599d', '5adddd575542997dc790706a', '5a7792ff5542995d831811eb', '5a74883755429979e288297c', '5ae557bd55429960a22e02c1', '5adc95655542994ed6169b9f', '5a8cf478554299585d9e3781', '5a7715b655429966f1a36c37', '5a81b90655429926c1cdad6b', '5a7222bc55429971e9dc92c6', '5a7cc862554299683c1c637a', '5ab7fa6d5542995dae37ea0f', '5a8c4d675542996e8ac88a5a', '5ac3b3a6554299741d48a2e2', '5a76a3da554299373536012a', '5ab8a53055429919ba4e2343', '5a7a672055429941d65f2620', '5a7b2b495542992d025e678e', '5a870d63554299211dda2bbb', '5abe89035542993f32c2a15d', '5ac176d75542994ab5c67d50', '5abbf2475542993f40c73c25', '5ab2f338554299166977414d', '5ac0e43d5542996f0d89cc32', '5ab3fcfa554299753aec5a19', '5a7495d255429929fddd8469', '5a713a745542994082a3e6ac', '5abbf75055429931dba145e6', '5a791df055429974737f7992', '5a870ae255429960ec39b709', '5a7605e655429976ec32bce8', '5adf75a15542995534e8c7bb', '5ab94761554299743d22eab3', '5ac3136e5542995ef918c0f2', '5a7d0886554299683c1c6411', '5a7e46625542991319bc945c', '5a775b4a5542993569682d67', '5adc1be855429944faac2424', '5a77204b55429972597f1440', '5a7f68e955429969796c1a3c', '5a7dbacf5542997cc2c47484', '5a88da6b5542993b751ca887', '5ade4d325542997c77adeddf', '5abb051e554299232ef4a3b2', '5ae230c45542994d89d5b388', '5ab27251554299340b5254cc', '5adc24aa5542994650320c8d', '5ae4f92f55429913cc20454e', '5a755fe05542992d0ec05f74', '5ade4b605542997c77adedd7', '5ae1e31a5542997f29b3c167', '5ae1379e55429920d5234327', '5a7ba0db554299294a54aa37', '5a7d0a73554299683c1c6416', '5abd95af5542993062266cd0', '5ac1bd705542994ab5c67df0', '5ab9cd1d55429955dce3ed87', '5a8b6af755429950cd6afce9', '5adc491855429944faac24c1', '5a710d195542994082a3e521', '5a8f900d55429918e830d265', '5a7bf25e5542996dd594b863', '5a7d084a554299683c1c6410', '5ab9152355429919ba4e2398', '5ab5c1fc554299488d4d9a17', '5a761ad655429976ec32bd0a', '5ae235455542992decbdcc5f', '5adf888d5542995534e8c7db', '5a8d1287554299653c1aa137', '5a7a5fd055429941d65f25ed', '5ab9c0015542996be202059e', '5a7733725542993735360215', '5abfae905542990832d3a19d', '5a7cc7ac55429909bec76801', '5ae4d59b55429913cc204521', '5a710fff5542994082a3e547', '5a7135a75542994082a3e66d', '5ab2392f554299722f9b4cc9', '5ae3d59b5542991a06ce9a29', '5a73b7e555429978a71e908f', '5abccb9e55429959677d6ae7', '5a7b88495542995eb53be951', '5abccee255429959677d6aeb', '5a7f0e4555429934daa2fcb1', '5adf7f9b5542995534e8c7d0', '5abac7e15542996cc5e49e91', '5abbb5da5542996606241723', '5a7604df5542994ccc91868c', '5a7990745542990784727835', '5aba93c45542994dbf019951', '5a77174655429966f1a36c4b', '5a77a20c5542992a6e59df3c', '5a79d2b95542994f819ef0c0', '5a8b5a2f55429950cd6afcc8', '5a77a5f45542992a6e59df54', '5a75cd0d5542992d0ec05ff5', '5ae5c3a55542990ba0bbb2d6', '5a73897e554299623ed4abe2', '5a7b8f9c554299294a54a9fa', '5a7310945542992359bc3223', '5ab446f75542991751b4d723', '5ae174205542990adbacf79a', '5a89c09b5542993b751ca986', '5a8af8fb55429949d91db440', '5a77106c55429937353601be', '5a865f665542991e77181620', '5a8b4fc755429950cd6afc97', '5a90a1985542990a98493673', '5a88de54554299206df2b388', '5a73b91455429978a71e9092', '5ab3450e554299753aec596a', '5ae438845542995dadf242f1', '5a77b3365542992a6e59df90', '5a85c4bc5542992a431d1b98', '5a7660415542992db9473779', '5ae52c2155429908b632653b', '5ac3b61c55429939154138cf', '5ab818885542990e739ec81b', '5a79098355429970f5fffe2a', '5a80b2c3554299485f5986c6', '5ab3fbbd5542992ade7c6f18', '5ac198a355429964131be24a', '5ab7970355429928e1fe3884', '5a8110c0554299260e20a22c', '5ae0e4c6554299422ee99545', '5ae1dbfd5542997283cd22a3', '5adf290d5542993344016c06', '5ab7efc05542992aa3b8c88a', '5a7e2e4c55429934daa2fbe7', '5a7fa92d5542994857a767a7', '5a77ab4a5542997042120ad1', '5abed6855542994516f4544a', '5a7347875542994cef4bc4ff', '5ae491b955429970de88d9b4', '5ab1ca105542997061209571', '5a78c2f555429970f5fffd76', '5a7a79875542995eb53be840', '5a7d97aa5542990b8f5039c9', '5ab24fbe554299449642c86d', '5a7544d45542993748c89805', '5ab1c64b5542997061209567', '5ac514d45542994611c8b373', '5a7769435542993569682d8b', '5a77204a55429966f1a36c89', '5a77789d5542997042120a77', '5a7771f75542997042120a46', '5abd1e3f55429933744ab730', '5a7572c55542992db947366b', '5a79e0e35542994f819ef0ea', '5abc709f55429959677d6aba', '5ac3c937554299204fd21e58', '5adf749e5542995534e8c7b7', '5a74b84955429929fddd84d1', '5ab2a6955542992953946797', '5abbe1ea554299642a094ba8', '5a7392f755429905862fe063', '5abc0fde55429959677d6a08', '5a825100554299676cceb25b', '5a8a07635542992d82986e5a', '5adc57bc5542996e6852531d', '5a8f213555429918e830d194', '5ab32702554299753aec594f', '5a839c535542992ef85e232d', '5abe0bc65542991f661060ba', '5a75ebe6554299109176e5d2', '5a8f600c5542992414482a8f', '5a7906bf5542990784727791', '5ab2f247554299545a2cfadf', '5a8cadfb554299585d9e371c', '5a77434e55429966f1a36cd7', '5a82b52d55429940e5e1a918', '5a7dca905542990b8f503aac', '5a7a0b5e5542996c55b2dcea', '5ae015e0554299603e4183e6', '5a8ce86c55429941ae14df3a', '5ab9241b55429934fafe6e6a', '5ab731f65542992aa3b8c7c9', '5a821c4e55429903bc27ba3b', '5adc392955429944faac2477', '5a7bcc45554299294a54aae6', '5a790f7a554299029c4b5ef2', '5ab5e7a2554299494045f0b1', '5a7a93ba55429941d65f26c4', '5a89f48855429970aeb701ab', '5a7bfdd85542996dd594b87d', '5a80cef155429938b61421f5', '5ac272755542992f1f2b38ce', '5a7936f2554299029c4b5f2c', '5abdb45855429965af743ded', '5adeb68755429975fa854f77', '5a73280a5542991f29ee2d17', '5ae266a75542996483e64999', '5ae5269d5542993aec5ec163', '5a731edb5542992359bc323a', '5ae221455542994d89d5b363', '5a89bc32554299669944a58a', '5ab45d625542996a3a969f77', '5a89a8595542993b751ca974', '5a89f64e55429970aeb701b5', '5a775a8b5542994aec3b72a1', '5ae1ed1d5542994d89d5b2d0', '5a721e9555429971e9dc9294', '5a72c4785542992359bc31a4', '5a7c88a755429935c91b51fb', '5abd9dc25542993062266cd6', '5a7712ad55429972597f1428', '5abbfaf555429931dba14605', '5a8abc635542996c9b8d5f65', '5abb48a65542993f40c73ae7', '5ab96bd855429970cfb8ead6', '5a8669035542991e77181648', '5a791c5755429974737f798c', '5abfa8a85542997ec76fd423', '5a8087d55542996402f6a543', '5abc0ba5554299658360040a', '5adff12155429925eb1afb57', '5a7b72355542997c3ec97185', '5a75ff7f5542994ccc918679', '5a764f175542992db9473752', '5adbd88955429944faac237f', '5abf53795542993fe9a41e00', '5ab25dc0554299449642c87f', '5a7eba2d5542994959419a6b', '5ae46c235542995dadf2432a', '5a7fe8135542994857a7683f', '5adf250c5542993344016bf9', '5a8dbb5e554299653c1aa14a', '5adbd40d55429944faac2372', '5adc478055429944faac24b7', '5abc1a775542993a06baf87c', '5a89271f55429938390d4041', '5ab3ee00554299233954fff2', '5a8a6b0c55429970aeb702d4', '5ab7e31c5542992aa3b8c876', '5a77bd5a55429967ab105259', '5ac054a35542996f0d89cb90', '5a7e377455429934daa2fbf5', '5adf4b895542993a75d264aa', '5abd97b85542993062266cd3', '5a862342554299211dda2a80', '5ab3dc46554299753aec59d0', '5a773da355429972597f14c4', '5a84a6025542990548d0b2da', '5ac1c8fc5542994ab5c67e19', '5a8f938855429918e830d274', '5a8530c75542997b5ce3ffb9', '5a812b8455429938b61422db', '5adddf885542995b365fab7d', '5a7a7abb55429941d65f266e', '5a7a7b5055429941d65f2671', '5ab705bc5542992aa3b8c773', '5a86584a55429960ec39b669', '5ae01066554299025d62a3db', '5ae4964755429970de88d9be', '5ae02311554299603e4183ee', '5a7b9bc5554299294a54aa1e', '5a79635455429907847277fc', '5a7cf7ec55429907fabef070', '5a7a1b095542990198eaf082', '5abf204a5542997ec76fd3d0', '5a7d2251554299452d57bb13', '5abda80b5542996e802b4811', '5adced0b5542992c1e3a24b8', '5abcd352554299114383a168', '5adbcc5555429947ff173832', '5ae4c86a55429960a22e01de', '5ab7d13e5542992aa3b8c857', '5a8997875542993b751ca953', '5ab974485542996be20204fe', '5a74e04f5542996c70cfae26', '5abe77eb5542993f32c2a123', '5ae491ed5542996836b02cdc', '5a74402b55429974ef308bc6', '5ae2e614554299492dc91c7d', '5abfa71d5542997ec76fd41c', '5aba4d8a55429939ce03dc87', '5adf8b4a5542993344016cec', '5a845469554299123d8c220c', '5ab5aa1a5542997d4ad1f1aa', '5a83d2765542996488c2e4eb', '5a8e1e5155429917b4a5bd28', '5a847fc75542997175ce1ec7', '5a7b17e05542992d025e6760', '5a73923255429978a71e902d', '5ab92cd8554299131ca4229f', '5ae0dc3755429924de1b71a5', '5a7b76cd5542997c3ec971a0', '5a9055835542995651fb5145', '5a771e7f5542993569682ccc', '5a7b18c55542992d025e6767', '5ade38df55429939a52fe866', '5a7a3e285542996a35c1715a', '5a77544055429972597f14ff', '5a7f2d3b5542994959419aac', '5a87ebbc5542993e715ac00d', '5a76502e5542992db9473757', '5ab267df554299722f9b4d0c', '5a82e2fd55429966c78a6a9a', '5ae5b87755429960a22e031c', '5a7b52ae5542992d025e6800', '5a7b6e655542997c3ec97171', '5ae4bf7a5542995ad6573e3d', '5ab395b25542992ade7c6de9', '5a77bb515542997042120b06', '5a7902c45542990784727780', '5aded3785542993344016ba7', '5ae193315542997b2ef7d203', '5a7d0bd155429909bec76919', '5a7791ae5542992a6e59df00', '5abeeb845542994516f45481', '5abf47625542993fe9a41df2', '5a7a91a255429941d65f26b6', '5a7ae2df5542995eb53be8b6', '5a8754a55542993e715abef2', '5a71255d5542994082a3e5d2', '5add56925542992200553abd', '5a7118bb5542994082a3e586', '5a8f9f085542995b44242071', '5a79fdca5542996a35c1706c', '5a84dddb5542991dd0999e04', '5ab27247554299449642c8a7', '5abe33735542991f661060fe', '5ab734c35542992aa3b8c7d5', '5a863fc855429960ec39b659', '5adcafcc554299473435376c', '5a7c6b8e55429935c91b519b', '5a76306d5542992db9473739', '5a809a205542996402f6a591', '5ab8732a55429916710eb056', '5a7753be55429966f1a36d08', '5a7639d55542992db9473748', '5a85de275542997b5ce40031', '5a730d005542992359bc3218', '5a7b83ee5542997c3ec971e3', '5a721f3d55429971e9dc929a', '5a7f948655429969796c1ac3', '5a7c08405542990527d5544a', '5a77b7255542995d83181278', '5a75d5835542994ccc918633', '5a76fe0155429966f1a36c09', '5a7e98ae5542993067513595', '5a7286fc5542994cef4bc319', '5a762c435542992d0ec06049', '5a79104b55429970f5fffe43', '5a7620b055429976ec32bd25', '5adf5feb5542993344016c63', '5a7f67425542992097ad2f52', '5a747a2855429929fddd8443', '5ae1d8af5542997283cd2291', '5ac3ebd85542995c82c4ac93', '5abff7ae5542997d64295976', '5ab98ac1554299131ca4236c', '5a7b230b554299042af8f700', '5a76daeb55429966f1a36c04', '5a7b4bf15542995eb53be8f9', '5a7cc9a65542990527d5552f', '5add3b495542990dbb2f7dde', '5abcb42d55429959677d6aca', '5ae07e4155429945ae959380', '5ab26b0b5542993be8fa990e', '5a7b1b27554299042af8f6d2', '5ae1a9275542997f29b3c0ee', '5ab3bd8d55429969a97a81a1', '5a8de5a05542995085b3734c', '5adcb1255542990d50227cf9', '5add38aa5542990dbb2f7dd2', '5a713d2d5542994082a3e6d1', '5abbed315542993f40c73c19', '5a7789215542997042120a99', '5ab2169755429970612095bb', '5a776a6a5542993569682d98', '5a7b7af15542997c3ec971b7', '5a7224a555429971e9dc92db', '5ae48b2755429970de88d9a5', '5ae4a5b255429970de88d9f1', '5a72a5dd5542991f9a20c552', '5a7c3c6355429935c91b5139', '5a8c73a55542996e8ac88ab2', '5a8e1ad8554299068b959e60', '5a83293e5542993344745fd2', '5add506a5542992200553a9a', '5a809a4b5542992097ad3005', '5abcf46a55429965836004df', '5ab802845542991d322237fe', '5a7b794b5542997c3ec971ac', '5ac1b4745542994d76dccebd', '5a71838f5542994082a3e860', '5adc6d1f55429947ff17395a', '5ae23c745542992decbdcc9b', '5a72a9985542992359bc3159', '5ab5db555542992aa134a3af', '5abcd8af55429965836004d1', '5abbef6055429931dba145da', '5ab9e7f155429939ce03dc3b', '5a719a585542994082a3e890', '5a7e18af5542995ed0d16692', '5a8b48985542995d1e6f134a', '5a8c4002554299240d9c20e6', '5ac32c6e5542995ef918c15a', '5a78ec69554299148911f9a2', '5ab4386b5542991779162c1c', '5a760eb35542994ccc9186a5', '5ab7fab95542993667794082', '5a7139985542994082a3e6a0', '5a78d69b55429974737f78d0', '5a81bb4155429938b6142358', '5a7a16fa5542996c55b2dd06', '5a7782225542995d8318117c', '5a7ac37555429927d897bf0b', '5ac144d05542994ab5c67cd2', '5ab5fcff554299488d4d9a77', '5a793ff3554299029c4b5f3a', '5ac2841155429921a00aafc6', '5a74aa6255429916b01641b4', '5abc264f5542993a06baf89b', '5ae2a06c554299495565dae8', '5a8910d85542995153361291', '5ab41cfb5542996a3a969f49', '5a7f2faf5542993067513683', '5ab2f2ee554299166977414c', '5a71566f5542994082a3e7ea', '5a89f7ce55429970aeb701c0', '5a7ce8ef55429909bec76877', '5a8106cb55429938b6142296', '5adf33ce5542995ec70e8f8e', '5a8f2053554299458435d592', '5a821da05542995ce29dccb0', '5ac4fced5542996feb3fe9ba', '5a73b016554299623ed4ac27', '5a907dc85542990a98493662', '5a89d952554299669944a5c7', '5a7b88ff5542995eb53be956', '5a7cf6fe55429909bec768cd', '5a8c896d554299653c1aa0b2', '5a89c14f5542993b751ca98a', '5a74f5655542993748c89752', '5a8087365542992097ad2ff6', '5ab7a56955429928e1fe3888', '5a77659f554299373536025a', '5abe3f9d55429976d4830aab', '5a745d2755429974ef308be8', '5ac13e9a5542994ab5c67cc7', '5a86fe13554299211dda2b80', '5ab61db1554299710c8d1e68', '5abc01ce55429931dba14611', '5a8edb3955429917b4a5bde8', '5a726f7b5542997f827839cb', '5abaf3b65542992ccd8e7e72', '5ae1db9c5542997283cd22a1', '5ac1220b554299294b2190b4', '5a77bb265542992a6e59dfa3', '5ac4414c5542997ea680ca55', '5a72c5af5542992359bc31a6', '5a7b2e905542992d025e6794', '5ac3139a5542995ef918c0f4', '5a73b97855429978a71e9093', '5ae5c18c5542990ba0bbb2d1', '5ae2070a5542994d89d5b313', '5a8574945542997b5ce3fffb', '5a7cbf8c554299452d57b9f4', '5a7555215542996c70cfaee1', '5a76387d554299109176e6ba', '5abf44025542993fe9a41def', '5a73977d554299623ed4ac08', '5ae064985542993d6555eb47', '5a7b1023554299042af8f6c2', '5a7af1a955429931da12c98f', '5a7199725542994082a3e88f', '5a7652785542992db9473760', '5a7c74a65542990527d554b0', '5a7933b255429907847277eb', '5a8078d85542995d8a8ddf78', '5abf42f75542993fe9a41dee', '5a7ae38c5542992d025e6721', '5a7ab1b055429927d897bef4', '5a8e8f6f5542995085b37451', '5ae4988655429970de88d9c1', '5a75a76b5542992db9473697', '5abb8a9b5542996cc5e4a016', '5a7ca95b55429935c91b5287', '5abbe40555429931dba145cd', '5ae153915542990adbacf752', '5a90a9a45542990a9849367e', '5a75f7db5542994ccc918670', '5a835e215542992ef85e2296', '5a7ddfc55542995f4f4022e9', '5ab3f8c25542992ade7c6f02', '5add647a5542995b365fab26', '5a804f01554299485f5985bf', '5ab95dd8554299743d22eb13', '5add2b865542992c1e3a2550', '5a745a6055429974ef308be4', '5ab2eff05542991669774140', '5ae234005542994d89d5b392', '5a739d8755429978a71e9048', '5a7ca3205542990527d554ed']
    for qid in to_move:
        comp_data[qid] = int_data[qid]
        del int_data[qid]

    json.dump(list(comp_data.values()),
              open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/all_comparison_rev.json",
                   'w'),
              indent=2)
    json.dump(list(int_data.values()),
              open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/all_intersection_rev.json",
                   'w'),
              indent=2)

def get_reasoning_types():
    annotations = {}
    for inst in data_inst:
        if inst["type"] == "bridge":
            context, question = inst['context'], inst['question']
            answer = inst["answer"]
            sf_title = list(set([title for title, _ in inst["supporting_facts"]]))
            has_answer = []
            for title, ctx_lines in context:
                if title in sf_title:
                    passage = "".join(ctx_lines).lower()
                    if answer.lower() in passage:
                        has_answer.append(True)
                    else:
                        has_answer.append(False)

            if all(has_answer):
                rtype = 1
            else:
                rtype = 2
        elif inst["type"] == "comparison":
            if inst["_id"] in intersection:
                rtype = 3
            else:
                assert inst["_id"] in comparison
                rtype = 0

        annotations[inst["_id"]] = rtype

    json.dump(annotations,
              open("/mnt/750GB/data/Adversarial-MultiHopQA/data/hotpotqa/reasoning_splits/reasoning.json",
                   'w'),
              indent=2)


# load_data()
# get_reasoning_types()
# revisit_intersection_types()